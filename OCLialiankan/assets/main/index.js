System.register("chunks:///_virtual/Animal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCore.ts","./Global.ts"],(function(n){var t,e,i,o,r,u,c,a,s,l,m,h,d,p,C;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.createClass,o=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){u=n.cclegacy,c=n._decorator,a=n.SpriteFrame,s=n.Node,l=n.Sprite,m=n.Color,h=n.Component},function(n){d=n.GameCoreLogic},function(n){p=n.Global,C=n.GameState}],execute:function(){var f,A,g,I,x;u._RF.push({},"76cc40tLMpKg5AsCAMs/o6a","Animal",void 0);var y=c.ccclass,w=c.property;n("Animal",(f=y("Animal"),A=w(a),f((x=t((I=function(n){function t(){for(var t,e=arguments.length,i=new Array(e),u=0;u<e;u++)i[u]=arguments[u];return t=n.call.apply(n,[this].concat(i))||this,o(t,"animalFrames",x,r(t)),t.curAnimalIndex=0,t.curAnimalSprite=null,t.curRowIndex=-1,t.curColumnIndex=-1,t.curRowCount=-1,t.curColumnCount=-1,t}e(t,n);var u=t.prototype;return u.start=function(){this.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this)},u.update=function(n){p.getInstance().gameState==C.Success&&this.node.isValid&&(this.node.removeFromParent(),this.node.destroy())},u.onTouchEnd=function(n){console.log("Animal touched!"),this.node.getComponent(l).color=new m(128,128,128,128),d.addClickedAnimal(this)},i(t,[{key:"AnimalIndex",get:function(){return this.curAnimalIndex},set:function(n){this.curAnimalIndex=n,this.curAnimalIndex>0&&this.curAnimalIndex<this.animalFrames.length&&(this.curAnimalSprite=this.animalFrames[this.curAnimalIndex],this.node.getComponent(l).spriteFrame=this.curAnimalSprite)}},{key:"RowIndex",get:function(){return this.curRowIndex},set:function(n){this.curRowIndex=n}},{key:"ColumnIndex",get:function(){return this.curColumnIndex},set:function(n){this.curColumnIndex=n}},{key:"RowCount",get:function(){return this.curRowCount},set:function(n){this.curRowCount=n}},{key:"ColumnCount",get:function(){return this.curColumnCount},set:function(n){this.curColumnCount=n}}]),t}(h)).prototype,"animalFrames",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=I))||g));u._RF.pop()}}}));

System.register("chunks:///_virtual/GameCore.ts",["cc","./Global.ts"],(function(n){var e,o,r,t,d;return{setters:[function(n){e=n.cclegacy,o=n.Sprite,r=n.Color},function(n){t=n.Global,d=n.GameState}],execute:function(){e._RF.push({},"281f3NIxr1Eeq8vtVtKm2Ea","GameCore",void 0);n("GameCoreLogic",new(function(){function n(){this.clickedAnimals=[],this.nodePaths=new Map}var e=n.prototype;return e.addClickedAnimal=function(n){if(n){if(1==this.clickedAnimals.length){var e=this.clickedAnimals[0];if(e.ColumnIndex==n.ColumnIndex&&e.RowIndex==n.RowIndex)return}if(this.clickedAnimals.push(n),2==this.clickedAnimals.length){var s=!1,c=this.clickedAnimals[0],i=this.clickedAnimals[1];if(c.AnimalIndex!=i.AnimalIndex)return c.getComponent(o).color=new r(255,255,255,255),i.getComponent(o).color=new r(255,255,255,255),void(this.clickedAnimals=[]);(s=this.cornerHandle0({rowIndex:c.RowIndex,colIndex:c.ColumnIndex},{rowIndex:i.RowIndex,colIndex:i.ColumnIndex}))||(s=this.cornerHandle1({rowIndex:c.RowIndex,colIndex:c.ColumnIndex},{rowIndex:i.RowIndex,colIndex:i.ColumnIndex})),s||(s=this.cornerHandle2({rowIndex:c.RowIndex,colIndex:c.ColumnIndex},{rowIndex:i.RowIndex,colIndex:i.ColumnIndex})),s?(this.storeConnect(c.RowIndex,c.ColumnIndex,0),this.storeConnect(i.RowIndex,i.ColumnIndex,0),c.node.destroy(),i.node.destroy(),t.getInstance().score+=10,t.getInstance().score>=180&&(t.getInstance().gameState=d.Success,console.log("游戏胜利"))):(c.getComponent(o).color=new r(255,255,255,255),i.getComponent(o).color=new r(255,255,255,255)),this.clickedAnimals=[]}}},e.start=function(){},e.update=function(n){},e.storeConnect=function(n,e,o){var r=n+"_"+e;this.nodePaths.set(r,o)},e.cornerHandle0=function(n,e){if(console.log("cornerHandle0"),n.rowIndex==e.rowIndex){if(n.colIndex<e.colIndex){for(var o=n.colIndex+1;this.isPass(n.rowIndex,o);)o++;return o==e.colIndex}for(var r=n.colIndex-1;this.isPass(n.rowIndex,r);)r--;return r==e.colIndex}if(n.colIndex==e.colIndex){if(n.rowIndex<e.rowIndex){for(var t=n.rowIndex+1;this.isPass(t,n.colIndex);)t++;return t==e.rowIndex}for(var d=n.rowIndex-1;this.isPass(d,n.colIndex);)d--;return d==e.rowIndex}return!1},e.cornerHandle1=function(n,e){console.log("cornerHandle1");for(var o=[{rowIndex:n.rowIndex,colIndex:e.colIndex},{rowIndex:e.rowIndex,colIndex:n.colIndex}],r=0;r<o.length;r++){var t=o[r];if(this.isPass(t.rowIndex,t.colIndex)){var d=!0;if(d=d&&this.cornerHandle0(t,n)&&this.cornerHandle0(t,e))return!0}}return!1},e.cornerHandle2=function(n,e){console.log("cornerHandle2");for(var o=n.colIndex-1;this.isPass(n.rowIndex,o);){this.storeConnect(n.rowIndex,o,1);var r=this.cornerHandle1({rowIndex:n.rowIndex,colIndex:o},e);if(this.storeConnect(n.rowIndex,o,0),o-=1,r)return!0}for(o=n.colIndex+1;this.isPass(n.rowIndex,o);){this.storeConnect(n.rowIndex,o,1);var t=this.cornerHandle1({rowIndex:n.rowIndex,colIndex:o},e);if(this.storeConnect(n.rowIndex,o,0),o+=1,t)return!0}for(var d=n.rowIndex+1;this.isPass(d,n.colIndex);){this.storeConnect(d,n.colIndex,1);var s=this.cornerHandle1({rowIndex:d,colIndex:n.colIndex},e);if(this.storeConnect(d,n.colIndex,0),d+=1,s)return!0}for(d=n.rowIndex-1;this.isPass(d,n.colIndex);){this.storeConnect(d,n.colIndex,1);var c=this.cornerHandle1({rowIndex:d,colIndex:n.colIndex},e);if(this.storeConnect(d,n.colIndex,0),d-=1,c)return!0}return!1},e.isPass=function(n,e){var o=n+"_"+e;return!!this.nodePaths.has(o)&&0==this.nodePaths.get(o)},n}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Animal.ts","./GameCore.ts","./Global.ts"],(function(e){var n,t,o,i,a,s,r,l,d,c,h,m,u,p,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.Prefab,l=e.view,d=e.instantiate,c=e.Component},function(e){h=e.Animal},function(e){m=e.GameCoreLogic},function(e){u=e.Global,p=e.LevelDatas,f=e.GameState}],execute:function(){var v,C,w,g,R;a._RF.push({},"83953eF/F1IO6eGtPysvS2s","GameLevel",void 0);var y=s.ccclass,I=s.property;e("GameLevel",(v=y("GameLevel"),C=I(r),v((R=n((g=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,o(n,"animalPrefab",R,i(n)),n.nodeRows=6,n.nodeCols=6,n.animalKinds=8,n.animalKindMap=new Map,n}t(n,e);var a=n.prototype;return a.start=function(){switch(u.getInstance().curLevel){case 1:this.nodeRows=p[u.getInstance().curLevel-1].nodeRows,this.nodeCols=p[u.getInstance().curLevel-1].nodeCols,this.animalKinds=p[u.getInstance().curLevel-1].animalKinds}for(var e=l.getVisibleSize().width,n=(-100*this.nodeCols>>1)+(e-100*this.nodeCols)/2,t=-100*this.nodeRows>>1,o=0;o<this.nodeRows;o++){for(var i=0;i<this.nodeCols;i++){var a=d(this.animalPrefab);this.node.parent.addChild(a),a.x=n+100*i,a.y=t;var s=a.getComponent(h);s.AnimalIndex=this.randomAnimalIndex(o,i),s.RowIndex=o,s.ColumnIndex=i,s.RowCount=this.nodeRows,s.ColumnCount=this.nodeCols,m.storeConnect(o,i,1)}n=(-100*this.nodeCols>>1)+(e-100*this.nodeCols)/2,t+=100}for(var r=0;r<this.nodeCols;r++)m.storeConnect(-1,r,0),m.storeConnect(this.nodeRows,r,0);for(var c=0;c<this.nodeRows;c++)m.storeConnect(c,-1,0),m.storeConnect(c,this.nodeCols,0)},a.update=function(e){u.getInstance().gameState==f.Success&&this.node.isValid&&(this.node.removeFromParent(),this.node.destroy())},a.randomAnimalIndex=function(e,n){var t=1+Math.floor(Math.random()*this.animalKinds);if(e*this.nodeCols+n>this.nodeCols*this.nodeRows-this.animalKinds&&this.animalKindMap.forEach((function(e,n){e%2!=0&&(t=n)})),this.animalKindMap.has(t)&&this.animalKindMap.get(t)>0){var o=this.animalKindMap.get(t)+1;this.animalKindMap.set(t,o)}else this.animalKindMap.set(t,1);return t},n}(c)).prototype,"animalPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=g))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8aec7HLm/BD2LUmdQjH1Pvh","Global",void 0);var n=e("GameState",function(e){return e[e.Ready=0]="Ready",e[e.Playing=1]="Playing",e[e.Success=2]="Success",e}({}));e("LevelDatas",[{level:1,nodeRows:6,nodeCols:6,animalKinds:8}]);e("Global",function(){function e(){this.score=0,this.gameState=n.Ready,this.curLevel=1}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.reset=function(){this.score=0,this.curLevel=1},e}()).instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Animal.ts","./GameCore.ts","./GameLevel.ts","./Global.ts","./UI.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/UI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts"],(function(e){var t,a,n,s,o,i,r,c,l,g,u,m,d,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,r=e.Prefab,c=e.Node,l=e.Button,g=e.AudioSource,u=e.Label,m=e.instantiate,d=e.Component},function(e){h=e.Global,p=e.GameState}],execute:function(){var y,N,C,S,b,f,v,B,I;o._RF.push({},"ab358bNZHBLNZcIuaD6+A4L","UI",void 0);var L=i.ccclass,P=i.property;e("UI",(y=L("UI"),N=P(r),C=P(c),S=P(c),y((v=t((f=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"levelPrefab",v,s(t)),n(t,"gamestartNode",B,s(t)),n(t,"gameSuccessNode",I,s(t)),t.tempScore=0,t.sounds=null,t}a(t,e);var o=t.prototype;return o.start=function(){this.sounds=this.node.parent.getChildByName("Canvas").getChildByName("Sounds"),this.tempScore=h.getInstance().score,this.gamestartNode.active=!0,this.gameSuccessNode.active=!1,this.gamestartNode.getChildByName("StartBtn").on(l.EventType.CLICK,this.startGame,this),this.gameSuccessNode.getChildByName("ReStartBtn").on(l.EventType.CLICK,this.startGame,this)},o.update=function(e){h.getInstance().gameState==p.Success&&0==this.gameSuccessNode.active&&(this.sounds.getChildByName("gamebgm").getComponent(g).stop(),this.gameSuccessNode.active=!0,this.gameSuccessNode.getChildByName("Score").getComponent(u).string="Score:"+h.getInstance().score.toString()),this.tempScore!=h.getInstance().score&&(this.tempScore=h.getInstance().score,this.sounds.getChildByName("xiaochu").getComponent(g).play(),this.node.parent.getChildByName("Canvas").getChildByName("Score").getComponent(u).string="Score:"+h.getInstance().score.toString())},o.startGame=function(){this.gamestartNode.active=!1,this.gameSuccessNode.active=!1,h.getInstance().reset(),h.getInstance().gameState=p.Playing,this.sounds.getChildByName("gamebgm").getComponent(g).play(),this.sounds.getChildByName("gamebgm").getComponent(g).loop=!0;var e=m(this.levelPrefab);this.node.parent.getChildByName("Canvas").addChild(e)},t}(d)).prototype,"levelPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(f.prototype,"gamestartNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(f.prototype,"gameSuccessNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});